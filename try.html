document.addEventListener("DOMContentLoaded", () => {
	const form = document.querySelector("form");
	if (!form) return; // Ensure form exists on the page
  
	form.addEventListener("submit", function (e) {
	  e.preventDefault();
  
	  // Get form values
	  const name = document.getElementById("name").value;
	  const phone = document.getElementById("phone").value;
	  const age = document.getElementById("age").value;
	  const gender = document.getElementById("gender").value;
	  const study = document.getElementById("study").value;
	  const doctor = document.getElementById("doctor").value;
	  const date = document.getElementById("date").value;
	  const time = document.getElementById("time").value;
  
	  // Prepare data for WhatsApp and email
	  const appointmentData = {
		name,
		phone,
		age,
		gender,
		study,
		doctor,
		date,
		time,
	  };
  
	  // Send data to WhatsApp backend
	  fetch("/send-whatsapp", {
		method: "POST",
		headers: {
		  "Content-Type": "application/json",
		},
		body: JSON.stringify(appointmentData),
	  })
		.then((response) => {
		  if (response.ok) {
			alert("Appointment details sent successfully via WhatsApp!");
		  } else {
			alert("Error sending appointment details to WhatsApp.");
		  }
		})
		.catch((error) => console.error("WhatsApp Error:", error));
  
	  // Send data to email backend
	  fetch("/send-email", {
		method: "POST",
		headers: {
		  "Content-Type": "application/json",
		},
		body: JSON.stringify(appointmentData), // Use the same data
	  })
		.then((response) => {
		  if (response.ok) {
			alert("Appointment details sent successfully via Email!");
		  } else {
			alert("Error sending appointment details via Email.");
		  }
		})
		.catch((error) => console.error("Email Error:", error));
	});
  });
  